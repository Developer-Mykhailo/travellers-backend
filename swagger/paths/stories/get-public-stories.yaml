tags:
  - Stories
summary: Get all stories
operationId: getStories
description: >
  Public endpoint to get stories with pagination, filtering by categories and owners,
  full-text search and sorting.

security: []

parameters:
  - in: query
    name: page
    schema:
      type: integer
      minimum: 1
      example: 1

  - in: query
    name: perPage
    schema:
      type: integer
      minimum: 1
      example: 10

  - in: query
    name: category
    description: You can pass several categories
    schema:
      type: array
      items:
        type: string
      example: [Гори, Європа]

  - in: query
    name: owner
    description: You can pass several owners by name
    schema:
      type: array
      items:
        type: string
      example: [Mykhailo, Назар]

  - in: query
    name: query
    description: Full-text search by title or article. You can pass several queries
    schema:
      type: array
      items:
        type: string
      example: [Banff, смак]

  - in: query
    name: sortBy
    schema:
      type: string
      enum:
        - date
        - title
        - article
        - favoriteCount
        - owner
      example: owner

  - in: query
    name: sortOrder
    schema:
      type: string
      enum: [asc, desc]
      example: desc

responses:
  200:
    description: Stories successfully found
    content:
      application/json:
        schema:
          type: object
          properties:
            status:
              type: integer
              example: 200
            message:
              type: string
              example: Successfully found stories!
            data:
              type: object
              properties:
                data:
                  type: array
                  items:
                    allOf:
                      - $ref: ../../components/schemas/story.yaml
                      - type: object
                        properties:
                          owner:
                            type: object
                            properties:
                              name:
                                type: string
                                example: User Name
                              avatar:
                                oneOf:
                                  - type: string
                                    format: uri
                                  - type: 'null'

                page:
                  type: integer
                  example: 1
                perPage:
                  type: integer
                  example: 10
                totalItems:
                  type: integer
                  example: 10
                totalPages:
                  type: integer
                  example: 1
                hasNextPage:
                  type: boolean
                  example: false
                hasPreviousPage:
                  type: boolean
                  example: false

  400:
    $ref: ../../components/responses/errors.yaml#/BadRequest

  404:
    $ref: ../../components/responses/errors.yaml#/NotFound
