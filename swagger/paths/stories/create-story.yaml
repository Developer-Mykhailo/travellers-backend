tags:
  - Stories
summary: Create new story
operationId: createStory
description: Create a new story with image upload

requestBody:
  required: true
  content:
    multipart/form-data:
      schema:
        type: object
        required:
          - title
          - article
          - category
          - photo
        properties:
          title:
            type: string
            example: Mountains

          article:
            type: string
            example: About Mountains - Lorem ipsum dolor sit amet...

          category:
            type: string
            description: Category ID
            example: 'Гори'

          photo:
            type: string
            format: binary
            description: Story image file

responses:
  201:
    description: Story successfully created
    content:
      application/json:
        schema:
          type: object
          properties:
            status:
              type: integer
              example: 201
            message:
              type: string
              example: Story successfully created!
            data:
              type: object
              allOf:
                - $ref: ../../components/schemas/story.yaml
                - type: object
                  properties:
                    category:
                      type: object
                      properties:
                        _id:
                          type: string
                          example: 64f1c9c2e4b0f5a123456789
                        name:
                          type: string
                          example: Гори
                    owner:
                      type: object
                      properties:
                        _id:
                          type: string
                          example: 64f1c9c2e4b0f5a123456789
                        name:
                          type: string
                          example: User Name
                        avatar:
                          oneOf:
                            - type: string
                              format: uri
                            - type: 'null'

  400:
    $ref: ../../components/responses/errors.yaml#/BadRequest
  401:
    $ref: ../../components/responses/errors.yaml#/Unauthorized
